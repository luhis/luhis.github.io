{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/blog/debugging-singalR-longpolling/","result":{"data":{"markdownRemark":{"html":"<h1>SignalR</h1>\n<p>SignalR is a Microsoft technology that allows push messages from the server to the client.  Under the hood, it uses a variety of technologies to allow delivery to the client.</p>\n<h2>Debugging</h2>\n<p>In debug, we normally use the WebSockets connection method, however in production some users are not.  For instance, some corporate firewalls block WbeSockets and Server Sent Events.  We need to be able to simulate this to debug issues.</p>\n<h2>WebSockets</h2>\n<p>WebSockets are a persistent connection from the client to the server.  The server can push events to the client, and the client can send commands to the server over the same connection.</p>\n<h2>Forcing Transport in Code</h2>\n<p>We can force the client to use Long Polling like this:</p>\n<pre><code class=\"language-TypeScript\">const connection = new HubConnectionBuilder()\n        .withUrl(\"/resultsHub\", HttpTransportType.LongPolling)\n        .build();\n</code></pre>\n<p>This is helpful in debug, but when we need to test in a UAT environment, it's not great as it involves modifying the code.</p>\n<h2>Blocking WebSockets</h2>\n<p>Using <a href=\"https://github.com/arthepsy/chrome-disable-websockets\">this extension</a> we can disable WebSockets.  Once it's running, we can see in the Chrome tools that there are no WebSocket connections.  Events are now sent to the client over a Server Sent Events connection, when the client wants to send a command to the server, a new Post request it made.  This is because the Server Sent Events connection is a one way connection</p>\n<h2>Blocking Server Sent Events</h2>\n<p>I could not find a plugin or setting to disable server sent events in Chrome, but we can use Chrome request blocking to block creation of the SSE connection.</p>\n<p><code>*serverSentEvents*</code></p>\n<p>Unfortunately this only works in the legacy old SignalR, the new Core SignalR uses a different negotiation protocol which is not so easily blocked.</p>","frontmatter":{"date":"12 days ago","title":"Debugging SignalR Long Polling","author":"Matt McCorry","tags":"SignalR,JavaScript"}}},"pageContext":{"slug":"/debugging-singalR-longpolling/"}},"staticQueryHashes":["1326653821"]}