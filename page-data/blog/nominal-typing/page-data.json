{"componentChunkName":"component---src-pages-blog-markdown-remark-fields-slug-tsx","path":"/blog/nominal-typing/","result":{"data":{"markdownRemark":{"fields":{"slug":"nominal-typing"},"html":"<h1>Nominal Typing</h1>\n<h2>Problem</h2>\n<p>Recently I have been working on a new proof of concept product. For speed, much of the API returns dictionaries, then to access the data you just need to pass in the right ID. This works, is fast, but is not very easy to work with. I requires knowing which ID is required to access the data of the dictionary. It is not possible to name the key of the dictionary (e.g. customerId) to make it easier to work with. Yes, I could make a helper function like getCustomerDetails(customerDataDictionary, customerId), but that is less interesting.</p>\n<h2>Single Case Union Types</h2>\n<p>F# (and others) has a feature called <a href=\"https://fsharpforfunandprofit.com/posts/designing-with-types-single-case-dus/\">single case union types</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"fsharp\"><pre class=\"language-fsharp\"><code class=\"language-fsharp\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">CustomerId</span> <span class=\"token operator\">=</span> CustomerId <span class=\"token keyword\">of</span> <span class=\"token class-name\">int</span></code></pre></div>\n<p>Essentially, they allow you to create a type wrapper around a type, so I can create a customerId that has an underlying type of int. If my function requires a CustomerId, I need to pass it one, an int will not do. By using this across my application I can avoid primitive obsession, but without having to pass objects around everywhere. This improves type checking, and readability as now more information is embedded in the type, rather than the parameter name.</p>\n<h2>Nominal Types</h2>\n<p>In typescript we can create a type alias:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">CustomerId</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">number</span></code></pre></div>\n<p>which is better than nothing, but it is just an alias. We can type all customerIds as CustomerId, but numbers will be accepted too.</p>\n<p>We need more than an alias, we need a named type that can be verified by the compiler, this is known as nominal typing.</p>\n<h1>TypeScript Implementation</h1>\n<p>In the past, I have implemented nominal types by hand with something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">enum</span> CustomerIdEnum <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">CustomerId</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">&amp;</span> CustomerIdEnum</code></pre></div>\n<p>However, there are also libraries that allow creation of these types such as <a href=\"https://github.com/andnp/SimplyTyped\">SimplyTyped</a></p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">CustomerId</span> <span class=\"token operator\">=</span> Nominal<span class=\"token operator\">&lt;</span><span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'customerId'</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Using the library is a better option. As TypeScript progresses we might get a native solution to this, so it will be easier to strip out when it becomes available.</p>","frontmatter":{"date":"4 years ago","title":"Nominal Typing","author":"Matt McCorry","tags":"React,TypeScript"}}},"pageContext":{"id":"ee9c362d-4394-5c55-a0af-c4b7f41a2f15","fields__slug":"nominal-typing","__params":{"fields__slug":"nominal-typing"}}},"staticQueryHashes":["3460496508"],"slicesMap":{}}