{"version":3,"file":"447-89ca706b2230ce8ba054.js","mappings":"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","sources":["webpack://gatsby-starter-default/../src/components/intersection-observer.ts","webpack://gatsby-starter-default/../src/components/lazy-hydrate.tsx","webpack://gatsby-starter-default/./node_modules/preact-render-to-string/dist/index.module.js"],"sourcesContent":["let intersectionObserver: IntersectionObserver\n\nexport type Unobserver = () => void\n\nconst ioEntryMap = new WeakMap<HTMLElement, () => void>()\n/* eslint-disable @typescript-eslint/no-explicit-any  */\nconst connection =\n  (navigator as any).connection ||\n  (navigator as any).mozConnection ||\n  (navigator as any).webkitConnection\n/* eslint-enable @typescript-eslint/no-explicit-any */\n\n// These match the thresholds used in Chrome's native lazy loading\n// @see https://web.dev/browser-level-image-lazy-loading/#distance-from-viewport-thresholds\nconst FAST_CONNECTION_THRESHOLD = `1250px`\nconst SLOW_CONNECTION_THRESHOLD = `2500px`\n\nexport function createIntersectionObserver(\n  callback: () => void\n): (element: HTMLElement) => Unobserver {\n  const connectionType = connection?.effectiveType\n\n  // if we don't support intersectionObserver we don't lazy load (Sorry IE 11).\n  if (!(`IntersectionObserver` in window)) {\n    return function observe(): Unobserver {\n      callback()\n      return function unobserve(): void {}\n    }\n  }\n\n  if (!intersectionObserver) {\n    intersectionObserver = new IntersectionObserver(\n      entries => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting) {\n            // Get the matching entry's callback and call it\n            ioEntryMap.get(entry.target as HTMLElement)?.()\n            // We only need to call it once\n            ioEntryMap.delete(entry.target as HTMLElement)\n          }\n        })\n      },\n      {\n        rootMargin:\n          connectionType === `4g` && !connection?.saveData\n            ? FAST_CONNECTION_THRESHOLD\n            : SLOW_CONNECTION_THRESHOLD,\n      }\n    )\n  }\n\n  return function observe(element: HTMLElement): Unobserver {\n    // Store a reference to the callback mapped to the element being watched\n    ioEntryMap.set(element, callback)\n    intersectionObserver.observe(element)\n\n    return function unobserve(): void {\n      if (intersectionObserver && element) {\n        ioEntryMap.delete(element)\n        intersectionObserver.unobserve(element)\n      }\n    }\n  }\n}\n","import React from \"react\"\nimport { renderToStaticMarkup } from \"react-dom/server\"\nimport { LayoutWrapper } from \"./layout-wrapper\"\nimport { Placeholder } from \"./placeholder\"\nimport { MainImage } from \"./main-image\"\nimport {\n  hasNativeLazyLoadSupport,\n  getMainProps,\n  getPlaceholderProps,\n} from \"./hooks\"\nimport { createIntersectionObserver } from \"./intersection-observer\"\nimport type { MainImageProps } from \"./main-image\"\nimport type { GatsbyImageProps } from \"./gatsby-image.browser\"\n\ntype LazyHydrateProps = Omit<GatsbyImageProps, \"as\" | \"style\" | \"className\"> & {\n  isLoading: boolean\n  isLoaded: boolean\n}\n\nasync function applyPolyfill(element: HTMLImageElement): Promise<void> {\n  if (!(`objectFitPolyfill` in window)) {\n    await import(\n      // @ts-ignore typescript can't find the module for some reason ¯\\_(ツ)_/¯\n      /* webpackChunkName: \"gatsby-plugin-image-objectfit-polyfill\" */ `objectFitPolyfill`\n    )\n  }\n  ;(window as any).objectFitPolyfill(element)\n}\n\nfunction toggleLoaded(\n  mainImage: HTMLElement,\n  placeholderImage: HTMLElement\n): void {\n  mainImage.style.opacity = `1`\n\n  if (placeholderImage) {\n    placeholderImage.style.opacity = `0`\n  }\n}\n\nfunction startLoading(\n  element: HTMLElement,\n  cacheKey: string,\n  imageCache: Set<string>,\n  onStartLoad: GatsbyImageProps[\"onStartLoad\"],\n  onLoad: GatsbyImageProps[\"onLoad\"],\n  onError: GatsbyImageProps[\"onError\"]\n): () => void {\n  const mainImage = element.querySelector(\n    `[data-main-image]`\n  ) as HTMLImageElement\n  const placeholderImage = element.querySelector<HTMLElement>(\n    `[data-placeholder-image]`\n  )\n  const isCached = imageCache.has(cacheKey)\n\n  function onImageLoaded(e): void {\n    // eslint-disable-next-line @babel/no-invalid-this\n    this.removeEventListener(`load`, onImageLoaded)\n\n    const target = e.currentTarget\n    const img = new Image()\n    img.src = target.currentSrc\n\n    if (img.decode) {\n      // Decode the image through javascript to support our transition\n      img\n        .decode()\n        .then(() => {\n          // eslint-disable-next-line @babel/no-invalid-this\n          toggleLoaded(this, placeholderImage)\n          onLoad?.({\n            wasCached: isCached,\n          })\n        })\n        .catch(e => {\n          // eslint-disable-next-line @babel/no-invalid-this\n          toggleLoaded(this, placeholderImage)\n          onError?.(e)\n        })\n    } else {\n      // eslint-disable-next-line @babel/no-invalid-this\n      toggleLoaded(this, placeholderImage)\n      onLoad?.({\n        wasCached: isCached,\n      })\n    }\n  }\n\n  mainImage.addEventListener(`load`, onImageLoaded)\n\n  onStartLoad?.({\n    wasCached: isCached,\n  })\n  Array.from(mainImage.parentElement.children).forEach(child => {\n    const src = child.getAttribute(`data-src`)\n    const srcSet = child.getAttribute(`data-srcset`)\n    if (src) {\n      child.removeAttribute(`data-src`)\n      child.setAttribute(`src`, src)\n    }\n    if (srcSet) {\n      child.removeAttribute(`data-srcset`)\n      child.setAttribute(`srcset`, srcSet)\n    }\n  })\n\n  imageCache.add(cacheKey)\n\n  // Load times not always fires - mostly when it's a 304\n  // We check if the image is already completed and if so we trigger onload.\n  if (mainImage.complete) {\n    onImageLoaded.call(mainImage, {\n      currentTarget: mainImage,\n    })\n  }\n\n  return (): void => {\n    if (mainImage) {\n      mainImage.removeEventListener(`load`, onImageLoaded)\n    }\n  }\n}\n\nexport function swapPlaceholderImage(\n  element: HTMLElement,\n  cacheKey: string,\n  imageCache: Set<string>,\n  style: React.CSSProperties,\n  onStartLoad: GatsbyImageProps[\"onStartLoad\"],\n  onLoad: GatsbyImageProps[\"onLoad\"],\n  onError: GatsbyImageProps[\"onError\"]\n): () => void {\n  if (!hasNativeLazyLoadSupport()) {\n    let cleanup\n    const io = createIntersectionObserver(() => {\n      cleanup = startLoading(\n        element,\n        cacheKey,\n        imageCache,\n        onStartLoad,\n        onLoad,\n        onError\n      )\n    })\n    const unobserve = io(element)\n\n    // Polyfill \"object-fit\" if unsupported (mostly IE)\n    if (!(`objectFit` in document.documentElement.style)) {\n      element.dataset.objectFit = style.objectFit ?? `cover`\n      element.dataset.objectPosition = `${style.objectPosition ?? `50% 50%`}`\n      applyPolyfill(element as HTMLImageElement)\n    }\n\n    return (): void => {\n      if (cleanup) {\n        cleanup()\n      }\n\n      unobserve()\n    }\n  }\n\n  return startLoading(\n    element,\n    cacheKey,\n    imageCache,\n    onStartLoad,\n    onLoad,\n    onError\n  )\n}\n\nexport function renderImageToString({\n  image,\n  loading = `lazy`,\n  isLoading,\n  isLoaded,\n  imgClassName,\n  imgStyle = {},\n  objectPosition,\n  backgroundColor,\n  objectFit = `cover`,\n  ...props\n}: LazyHydrateProps): string {\n  const {\n    width,\n    height,\n    layout,\n    images,\n    placeholder,\n    backgroundColor: wrapperBackgroundColor,\n  } = image\n\n  imgStyle = {\n    objectFit,\n    objectPosition,\n    backgroundColor,\n    ...imgStyle,\n  }\n\n  return renderToStaticMarkup(\n    <LayoutWrapper layout={layout} width={width} height={height}>\n      <Placeholder\n        {...getPlaceholderProps(\n          placeholder,\n          isLoaded,\n          layout,\n          width,\n          height,\n          wrapperBackgroundColor,\n          objectFit,\n          objectPosition\n        )}\n      />\n\n      <MainImage\n        {...(props as Omit<\n          MainImageProps,\n          \"images\" | \"fallback\" | \"onLoad\" | \"onError\"\n        >)}\n        width={width}\n        height={height}\n        className={imgClassName}\n        {...getMainProps(isLoading, isLoaded, images, loading, imgStyle)}\n      />\n    </LayoutWrapper>\n  )\n}\n","import{options as e,h as t,Fragment as r}from\"preact\";var o=/[\\s\\n\\\\/='\"\\0<>]/,n=/^(xlink|xmlns|xml)([A-Z])/,a=/^accessK|^auto[A-Z]|^ch|^col|cont|cross|dateT|encT|form[A-Z]|frame|hrefL|inputM|maxL|minL|noV|playsI|readO|rowS|spellC|src[A-Z]|tabI|item[A-Z]/,i=/^ac|^ali|arabic|basel|cap|clipPath$|clipRule$|color|dominant|enable|fill|flood|font|glyph[^R]|horiz|image|letter|lighting|marker[^WUH]|overline|panose|pointe|paint|rendering|shape|stop|strikethrough|stroke|text[^L]|transform|underline|unicode|units|^v[^i]|^w|^xH/,l=/[\"&<]/;function s(e){if(0===e.length||!1===l.test(e))return e;for(var t=0,r=0,o=\"\",n=\"\";r<e.length;r++){switch(e.charCodeAt(r)){case 34:n=\"&quot;\";break;case 38:n=\"&amp;\";break;case 60:n=\"&lt;\";break;default:continue}r!==t&&(o+=e.slice(t,r)),o+=n,t=r+1}return r!==t&&(o+=e.slice(t,r)),o}var c={},p=new Set([\"animation-iteration-count\",\"border-image-outset\",\"border-image-slice\",\"border-image-width\",\"box-flex\",\"box-flex-group\",\"box-ordinal-group\",\"column-count\",\"fill-opacity\",\"flex\",\"flex-grow\",\"flex-negative\",\"flex-order\",\"flex-positive\",\"flex-shrink\",\"flood-opacity\",\"font-weight\",\"grid-column\",\"grid-row\",\"line-clamp\",\"line-height\",\"opacity\",\"order\",\"orphans\",\"stop-opacity\",\"stroke-dasharray\",\"stroke-dashoffset\",\"stroke-miterlimit\",\"stroke-opacity\",\"stroke-width\",\"tab-size\",\"widows\",\"z-index\",\"zoom\"]),u=/[A-Z]/g;function f(e){var t=\"\";for(var r in e){var o=e[r];if(null!=o&&\"\"!==o){var n=\"-\"==r[0]?r:c[r]||(c[r]=r.replace(u,\"-$&\").toLowerCase()),a=\";\";\"number\"!=typeof o||n.startsWith(\"--\")||p.has(n)||(a=\"px;\"),t=t+n+\":\"+o+a}}return t||void 0}var _,d,h,m,v=[],g=Array.isArray,y=Object.assign;function b(o,n){var a=e.__s;e.__s=!0,_=e.__b,d=e.diffed,h=e.__r,m=e.unmount;var i=t(r,null);i.__k=[o];try{return C(o,n||k,!1,void 0,i)}finally{e.__c&&e.__c(o,v),e.__s=a,v.length=0}}function x(){this.__d=!0}var k={};function w(e,t){var r,o=e.type,n=!0;return e.__c?(n=!1,(r=e.__c).state=r.__s):r=new o(e.props,t),e.__c=r,r.__v=e,r.props=e.props,r.context=t,r.__d=!0,null==r.state&&(r.state=k),null==r.__s&&(r.__s=r.state),o.getDerivedStateFromProps?r.state=y({},r.state,o.getDerivedStateFromProps(r.props,r.state)):n&&r.componentWillMount?(r.componentWillMount(),r.state=r.__s!==r.state?r.__s:r.state):!n&&r.componentWillUpdate&&r.componentWillUpdate(),h&&h(e),r.render(r.props,r.state,t)}function C(t,l,c,p,u){if(null==t||!0===t||!1===t||\"\"===t)return\"\";if(\"object\"!=typeof t)return\"function\"==typeof t?\"\":s(t+\"\");if(g(t)){var v=\"\";u.__k=t;for(var b=0;b<t.length;b++){var k=t[b];null!=k&&\"boolean\"!=typeof k&&(v+=C(k,l,c,p,u))}return v}if(void 0!==t.constructor)return\"\";t.__=u,_&&_(t);var A,L,D,E=t.type,T=t.props,Z=l;if(\"function\"==typeof E){if(E===r){if(T.tpl){for(var F=\"\",U=0;U<T.tpl.length;U++)if(F+=T.tpl[U],T.exprs&&U<T.exprs.length){var W=T.exprs[U];if(null==W)continue;\"object\"!=typeof W||void 0!==W.constructor&&!g(W)?F+=W:F+=C(W,l,c,p,t)}return F}if(T.UNSTABLE_comment)return\"\\x3c!--\"+s(T.UNSTABLE_comment||\"\")+\"--\\x3e\";L=T.children}else{if(null!=(A=E.contextType)){var $=l[A.__c];Z=$?$.props.value:A.__}if(E.prototype&&\"function\"==typeof E.prototype.render)L=w(t,Z),D=t.__c;else{t.__c=D={__v:t,props:T,context:Z,setState:x,forceUpdate:x,__d:!0,__h:[]};for(var j=0;D.__d&&j++<25;)D.__d=!1,h&&h(t),L=E.call(D,T,Z);D.__d=!0}if(null!=D.getChildContext&&(l=y({},l,D.getChildContext())),(E.getDerivedStateFromError||D.componentDidCatch)&&e.errorBoundaries){var M=\"\";L=null!=L&&L.type===r&&null==L.key?L.props.children:L;try{return M=C(L,l,c,p,t)}catch(e){return E.getDerivedStateFromError&&(D.__s=E.getDerivedStateFromError(e)),D.componentDidCatch&&D.componentDidCatch(e,{}),D.__d&&(L=w(t,l),null!=(D=t.__c).getChildContext&&(l=y({},l,D.getChildContext())),M=C(L=null!=L&&L.type===r&&null==L.key?L.props.children:L,l,c,p,t)),M}finally{d&&d(t),t.__=void 0,m&&m(t)}}}var z=C(L=null!=L&&L.type===r&&null==L.key?L.props.children:L,l,c,p,t);return d&&d(t),t.__=void 0,m&&m(t),z}var H,q=\"<\"+E,B=\"\";for(var I in T){var N=T[I];switch(I){case\"children\":H=N;continue;case\"key\":case\"ref\":case\"__self\":case\"__source\":continue;case\"htmlFor\":if(\"for\"in T)continue;I=\"for\";break;case\"className\":if(\"class\"in T)continue;I=\"class\";break;case\"defaultChecked\":I=\"checked\";break;case\"defaultSelected\":I=\"selected\";break;case\"defaultValue\":case\"value\":switch(I=\"value\",E){case\"textarea\":H=N;continue;case\"select\":p=N;continue;case\"option\":p!=N||\"selected\"in T||(q+=\" selected\")}break;case\"dangerouslySetInnerHTML\":B=N&&N.__html;continue;case\"style\":\"object\"==typeof N&&(N=f(N));break;case\"acceptCharset\":I=\"accept-charset\";break;case\"httpEquiv\":I=\"http-equiv\";break;default:if(n.test(I))I=I.replace(n,\"$1:$2\").toLowerCase();else{if(o.test(I))continue;\"-\"!==I[4]&&\"draggable\"!==I||null==N?c?i.test(I)&&(I=\"panose1\"===I?\"panose-1\":I.replace(/([A-Z])/g,\"-$1\").toLowerCase()):a.test(I)&&(I=I.toLowerCase()):N+=\"\"}}null!=N&&!1!==N&&\"function\"!=typeof N&&(q=!0===N||\"\"===N?q+\" \"+I:q+\" \"+I+'=\"'+s(N+\"\")+'\"')}if(o.test(E))throw new Error(E+\" is not a valid HTML tag name in \"+q+\">\");return B||(\"string\"==typeof H?B=s(H):null!=H&&!1!==H&&!0!==H&&(B=C(H,l,\"svg\"===E||\"foreignObject\"!==E&&c,p,t))),d&&d(t),t.__=void 0,m&&m(t),!B&&S.has(E)?q+\"/>\":q+\">\"+B+\"</\"+E+\">\"}var S=new Set([\"area\",\"base\",\"br\",\"col\",\"command\",\"embed\",\"hr\",\"img\",\"input\",\"keygen\",\"link\",\"meta\",\"param\",\"source\",\"track\",\"wbr\"]),A=b,L=b;export default b;export{A as render,L as renderToStaticMarkup,b as renderToString};\n//# sourceMappingURL=index.module.js.map\n"],"names":["d","u","WeakMap","m","navigator","connection","mozConnection","webkitConnection","g","b","e","t","style","opacity","h","o","n","r","a","i","querySelector","c","s","has","l","this","removeEventListener","currentTarget","Image","src","currentSrc","decode","then","wasCached","catch","addEventListener","Array","from","parentElement","children","forEach","getAttribute","removeAttribute","setAttribute","add","complete","call","v","callback","window","IntersectionObserver","isIntersecting","get","target","delete","rootMargin","effectiveType","saveData","set","observe","unobserve","document","documentElement","dataset","objectFit","objectPosition","async","objectFitPolyfill","f","image","loading","isLoading","isLoaded","imgClassName","imgStyle","backgroundColor","p","y","w","width","j","height","C","layout","E","images","F","placeholder","P","L","className","length","test","charCodeAt","slice","Set","replace","toLowerCase","startsWith","_","isArray","Object","assign","__k","k","x","__d","type","__c","state","__s","props","__v","context","getDerivedStateFromProps","componentWillMount","componentWillUpdate","render","constructor","__","A","D","T","Z","tpl","U","exprs","W","UNSTABLE_comment","contextType","$","value","prototype","setState","forceUpdate","__h","getChildContext","getDerivedStateFromError","componentDidCatch","M","key","z","H","q","B","I","N","__html","Error","S"],"sourceRoot":""}